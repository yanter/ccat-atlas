import{animate as re}from"motion";var i={offset:120,duration:400,distance:100,delay:0,easing:"ease",once:!1,mirror:!1,disable:!1,disableMutationObserver:!1,timeUnits:"ms",startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50},O={linear:"linear",ease:void 0,"ease-in":"easeIn","ease-out":"easeOut","ease-in-out":"easeInOut","circ-in":"circIn","circ-out":"circOut","circ-in-out":"circInOut","back-in":"backIn","back-out":"backOut","back-in-out":"backInOut",anticipate:"anticipate","ease-in-back":[.6,-.28,.735,.045],"ease-out-back":[.175,.885,.32,1.275],"ease-in-out-back":[.68,-.55,.265,1.55],"ease-in-sine":[.47,0,.745,.715],"ease-out-sine":[.39,.575,.565,1],"ease-in-out-sine":[.445,.05,.55,.95],"ease-in-quad":[.55,.085,.68,.53],"ease-out-quad":[.25,.46,.45,.94],"ease-in-out-quad":[.455,.03,.515,.955],"ease-in-cubic":[.55,.085,.68,.53],"ease-out-cubic":[.25,.46,.45,.94],"ease-in-out-cubic":[.455,.03,.515,.955],"ease-in-quart":[.55,.085,.68,.53],"ease-out-quart":[.25,.46,.45,.94],"ease-in-out-quart":[.455,.03,.515,.955]},M={fade:{opacity:[0,1]},"fade-up":{opacity:[0,1],translateY:[100,0]},"fade-down":{opacity:[0,1],translateY:[-100,0]},"fade-left":{opacity:[0,1],translateX:[100,0]},"fade-right":{opacity:[0,1],translateX:[-100,0]},"fade-up-right":{opacity:[0,1],translateY:[100,0],translateX:[-100,0]},"fade-up-left":{opacity:[0,1],translateY:[100,0],translateX:[100,0]},"fade-down-right":{opacity:[0,1],translateY:[-100,0],translateX:[-100,0]},"fade-down-left":{opacity:[0,1],translateY:[-100,0],translateX:[100,0]},"flip-up":{perspective:[2500,2500],rotateX:[-100,0]},"flip-down":{perspective:[2500,2500],rotateX:[100,0]},"flip-left":{perspective:[2500,2500],rotateY:[100,0]},"flip-right":{perspective:[2500,2500],rotateY:[-100,0]},"slide-up":{translateY:[100,0]},"slide-down":{translateY:[-100,0]},"slide-left":{translateX:[100,0]},"slide-right":{translateX:[-100,0]},"zoom-in":{opacity:[0,1],scale:[.6,1]},"zoom-in-up":{opacity:[0,1],scale:[.6,1],translateY:[100,0]},"zoom-in-down":{opacity:[0,1],scale:[.6,1],translateY:[-100,0]},"zoom-in-left":{opacity:[0,1],scale:[.6,1],translateX:[100,0]},"zoom-in-right":{opacity:[0,1],scale:[.6,1],translateX:[-100,0]},"zoom-out":{opacity:[0,1],scale:[1.2,1]},"zoom-out-up":{opacity:[0,1],scale:[1.2,1],translateY:[100,0]},"zoom-out-down":{opacity:[0,1],scale:[1.2,1],translateY:[-100,0]},"zoom-out-left":{opacity:[0,1],scale:[1.2,1],translateX:[100,0]},"zoom-out-right":{opacity:[0,1],scale:[1.2,1],translateX:[-100,0]}};var y={};function E(e){if(e==null||typeof e!="string")return;if(Object.prototype.hasOwnProperty.call(y,e))return y[e];if(Object.prototype.hasOwnProperty.call(O,e))return O[e];let t=e.trim(),n=t.match(/cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)/);if(n){let r=n.slice(1,5).map(Number);if(r.length===4&&r.every(a=>Number.isFinite(a)))return r}let o=t.match(/^[\s[]*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)[\s\]]*$/);if(o){let r=o.slice(1,5).map(Number);if(r.length===4&&r.every(a=>Number.isFinite(a)))return r}return null}function S(e,t){if(!e||e.trim()==="")throw new Error("Custom easing name must be non-empty");if(typeof t=="string"){let n=E(t);if(n===null)throw new Error(`Invalid easing definition: "${t}"`);y[e]=n}else y[e]=t}function b(e,t){let n=e.dataset[t];if(n==null)return;let o=parseFloat(n);return Number.isFinite(o)?o:void 0}function D(e,t){let n=e.dataset["mos"]||"fade",o={offset:b(e,`${"mos"}Offset`),duration:b(e,`${"mos"}Duration`),delay:b(e,`${"mos"}Delay`),distance:b(e,`${"mos"}Distance`),easing:e.dataset[`${"mos"}Easing`],anchor:e.dataset[`${"mos"}Anchor`],once:e.hasAttribute(`data-${"mos"}-once`)?e.getAttribute(`data-${"mos"}-once`)!=="false":void 0,mirror:e.hasAttribute(`data-${"mos"}-mirror`)?e.getAttribute(`data-${"mos"}-mirror`)!=="false":void 0,anchorPlacement:e.dataset[`${"mos"}AnchorPlacement`]};return{...{...i,...t,...ne(o)},keyframes:n}}function ne(e){let t={};for(let n in e)e[n]!==void 0&&(t[n]=e[n]);return t}function T(e){let t=0,n=0,o=e;for(;o&&!isNaN(o.offsetLeft)&&!isNaN(o.offsetTop);)t+=o.offsetLeft-(o.tagName!=="BODY"?o.scrollLeft:0),n+=o.offsetTop-(o.tagName!=="BODY"?o.scrollTop:0),o=o.offsetParent;return{top:n,left:t}}function g(e,t){let n=window.innerHeight,o=t.anchor?document.querySelector(t.anchor)??e:e,r=T(o).top-n;switch(t.anchorPlacement){case"top-bottom":break;case"center-bottom":r+=o.offsetHeight/2;break;case"bottom-bottom":r+=o.offsetHeight;break;case"top-center":r+=n/2;break;case"center-center":r+=n/2+o.offsetHeight/2;break;case"bottom-center":r+=n/2+o.offsetHeight;break;case"top-top":r+=n;break;case"bottom-top":r+=n+o.offsetHeight;break;case"center-top":r+=n+o.offsetHeight/2;break}return r+t.offset}function v(e,t){let n=t.anchor?document.querySelector(t.anchor)??e:e;return T(n).top+n.offsetHeight-t.offset}function N(e){return T(e).top+e.offsetHeight<window.scrollY}var c=[];function u(e=!1){return!e&&c.length>0?c.map(t=>t.element):Array.from(document.querySelectorAll("[data-mos]"))}function Y(e,t){return c=[],e.forEach(n=>{let o=oe(n,t);o&&c.push(o)}),c}function oe(e,t){if(!e.getAttribute("data-mos"))return null;let o=D(e,t),r={in:g(e,o),out:o.mirror&&!o.once?v(e,o):!1};return{element:e,options:o,position:r,animated:!1,isReversing:!1,controls:void 0}}function A(){return c}function h(e){return c.find(t=>t.element===e)}function I(){c=[]}var R={};function X(e,t){if(!e||e.trim()==="")throw new Error("Custom keyframes name must be non-empty");R[e]=t}function C(e){return R[e]??M[e]??M.fade}function K(e,t){let n=t;switch(e.keyframes){case"fade-up":n={opacity:[0,1],translateY:[e.distance,0]};break;case"fade-down":n={opacity:[0,1],translateY:[-e.distance,0]};break;case"fade-left":n={opacity:[0,1],translateX:[e.distance,0]};break;case"fade-right":n={opacity:[0,1],translateX:[-e.distance,0]};break;case"fade-up-right":n={opacity:[0,1],translateY:[e.distance,0],translateX:[-e.distance,0]};break;case"fade-up-left":n={opacity:[0,1],translateY:[e.distance,0],translateX:[e.distance,0]};break;case"fade-down-right":n={opacity:[0,1],translateY:[-e.distance,0],translateX:[-e.distance,0]};break;case"fade-down-left":n={opacity:[0,1],translateY:[-e.distance,0],translateX:[e.distance,0]};break;case"slide-up":n={translateY:[e.distance,0]};break;case"slide-down":n={translateY:[-e.distance,0]};break;case"slide-left":n={translateX:[e.distance,0]};break;case"slide-right":n={translateX:[-e.distance,0]};break;case"zoom-in-up":case"zoom-out-up":n={...t,translateY:[e.distance,0]};break;case"zoom-in-down":case"zoom-out-down":n={...t,translateY:[-e.distance,0]};break;case"zoom-in-left":case"zoom-out-left":n={...t,translateX:[e.distance,0]};break;case"zoom-in-right":case"zoom-out-right":n={...t,translateX:[-e.distance,0]};break}return n}var f=new WeakMap,F={};function z(e,t){if(!e||e.trim()==="")throw new Error("Custom animation name must be non-empty");F[e]=t}function w(e,t){let n=h(e);if(!n)return null;if(n.controls)return n.controls;let o=le(e,t);return o?(n.controls=o,o):null}function $(e){let{element:t,options:n}=e;if(f.has(t))return;let o=w(t,n);o&&(o.pause(),e.animated=!1,e.isReversing=!1)}function U(e,t,n){t.finished.then(()=>{let o=h(e);o&&(o.isReversing?ie(e,t,o):ae(e,t,n))}).catch(()=>{se(e)})}function ie(e,t,n){t.time=0,t.pause(),f.delete(e),e.classList.remove("mos-animate"),n.isReversing=!1,n.animated=!1}function ae(e,t,n){n.once&&t.stop(),f.delete(e)}function se(e){let t=h(e);t&&(t.isReversing=!1)}function le(e,t){let n=F[t.keyframes];return n?ce(e,t,n):fe(e,t)}function ce(e,t,n){let o=n(e,t);return U(e,o,t),o}function fe(e,t){let n=me(t),o=ue(t),r=re(e,n,{duration:t.timeUnits==="s"?t.duration:t.duration/1e3,delay:t.timeUnits==="s"?t.delay:t.delay/1e3,ease:o,fill:"both"});return U(e,r,t),r}function me(e){let t=C(e.keyframes);return e.distance!=null&&e.distance!==i.distance?K(e,t):t}function ue(e){let t=E(e.easing);return e.easing&&t===null&&(console.warn(`[MOS] Invalid easing "${String(e.easing)}" \u2013 falling back to default "${i.easing}".`),t=E(i.easing)),t===null?void 0:t}function j(e){let{element:t,options:n}=e,o=w(t,n);o&&(o.complete(),t.classList.add("mos-animate"),e.animated=!0,e.isReversing=!1)}function _(e){let{element:t,options:n}=e,o=w(t,n);!o||f.get(t)&&!e.isReversing||(o.speed=1,o.play(),e.animated=!0,e.isReversing=!1,t.classList.add("mos-animate"),f.set(t,o))}function q(e){if(!e.controls)return;let{element:t,controls:n}=e;e.isReversing=!0,n.speed=-1,n.play(),f.set(t,n)}var k=null;function W(e){for(let t=0;t<e.length;t++){let n=e[t];if(n.nodeType===Node.ELEMENT_NODE){if(n.dataset&&n.dataset.mos)return!0;if(n.children&&n.children.length>0){let o=Array.from(n.children);if(W(o))return!0}}}return!1}function de(e){if(!e||e.length===0)return;let t=!1;for(let n of e){let o=Array.from(n.addedNodes),r=Array.from(n.removedNodes),a=[...o,...r];if(W(a)){t=!0;break}}t&&x()}function B(){k?.disconnect(),k=new MutationObserver(de),k.observe(document.documentElement,{childList:!0,subtree:!0})}function G(e,t){let n=null,o=0;return(...r)=>{let a=Date.now();a-o>t?(e(...r),o=a):(n&&clearTimeout(n),n=window.setTimeout(()=>{e(...r),o=Date.now(),n=null},t-(a-o)))}}function V(e,t){let n=null;return(...o)=>{n&&clearTimeout(n),n=window.setTimeout(()=>e(...o),t)}}function L(e){if(typeof e=="boolean")return e;if(typeof e=="function")try{return!!e()}catch{return!1}if(typeof window>"u")return!1;let t=window.innerWidth;switch(e){case"phone":return t<768;case"tablet":return t>=768&&t<1024;case"mobile":return t<1024;default:return!1}}function H(e){for(let{name:t}of Array.from(e.attributes))t.startsWith("data-mos")&&e.removeAttribute(t)}var d=null,J=i.throttleDelay;function pe(e,t){let{options:n,position:o}=e,r=()=>{!e.animated||e.isReversing||q(e)},a=()=>{e.animated&&!e.isReversing||_(e)};n.mirror&&o.out!==void 0&&o.out!==!1&&t>=o.out&&!n.once?r():o.in!==void 0&&t>=o.in?a():e.animated&&!n.once&&r()}function Q(){let e=window.scrollY;A().forEach(t=>{pe(t,e)})}function ye(e){let{element:t,options:n}=e;e.position={in:g(t,n),out:n.mirror&&!n.once?v(t,n):!1}}function Ee(e){let{element:t,options:n}=e;N(t)&&!n.mirror?j(e):$(e)}function P(){A().forEach(e=>{ye(e),e.animated||Ee(e)}),Q()}function Z(e){J=e}function ee(){if(d)return;let e=G(Q,J);window.addEventListener("scroll",e,{passive:!0}),d=e}function te(){d&&(window.removeEventListener("scroll",d),d=null)}var l=i,p=!1;function be(e,t){p||e.timeUnits!=="s"||(t.duration==null&&(e.duration=i.duration/1e3),t.delay==null&&(e.delay=i.delay/1e3))}function ge(){p&&P()}function ve(){let e=l.debounceDelay,t=V(ge,e);window.addEventListener("resize",t),window.addEventListener("orientationchange",t)}function he(){let e=l.startEvent;if(e==="DOMContentLoaded"&&["interactive","complete"].includes(document.readyState)||e==="load"&&document.readyState==="complete"){m(!0);return}else e==="load"?window.addEventListener(e,()=>m(!0),{once:!0}):document.addEventListener(e,()=>m(!0),{once:!0})}function Oe(e={}){if(l={...i,...e},be(l,e),p)return m(),u();let t=u();return L(l.disable)?(t.forEach(H),[]):(he(),ve(),!l.disableMutationObserver&&typeof MutationObserver<"u"&&B(),t)}function m(e=!1){if(e&&(p=!0),p){Z(l.throttleDelay);let t=u();Y(t,l),ee(),P()}}function x(){let e=u(!0);if(L(l.disable)){e.forEach(H);return}I(),te(),m()}var Me={init:Oe,refresh:m,refreshHard:x,registerKeyframes:X,registerEasing:S,registerAnimation:z};var ot=Me;export{Me as MOS,ot as default,ge as handleLayoutChange,Oe as init,m as refresh,x as refreshHard,z as registerAnimation,S as registerEasing,X as registerKeyframes,he as setupStartEventListener};
//# sourceMappingURL=index.js.map